{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport firebase from 'firebase';\nimport 'firebase/firestore';\nimport { navigate } from \"../navigationRef\";\nexport var get = function get(collection) {\n  var db, ref, data;\n  return _regeneratorRuntime.async(function get$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          console.log(\"[Firebase - get] collection: \" + collection);\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          data = [];\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(ref.get().then(function (snapshot) {\n            snapshot.forEach(function (doc) {\n              data.push(_objectSpread({\n                id: doc.id\n              }, doc.data()));\n            });\n          }).catch(function (err) {\n            return console.log('Error while fetching data (get)', err);\n          }));\n\n        case 6:\n          return _context.abrupt(\"return\", data);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var getOrderingBy = function getOrderingBy(collection, field) {\n  var direction,\n      db,\n      ref,\n      data,\n      _args2 = arguments;\n  return _regeneratorRuntime.async(function getOrderingBy$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          direction = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : 'asc';\n          console.log(\"[Firebase - getOrderingBy] collection: \" + collection);\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          data = [];\n          _context2.next = 7;\n          return _regeneratorRuntime.awrap(ref.orderBy(field, direction).get().then(function (snapshot) {\n            snapshot.forEach(function (doc) {\n              data.push(_objectSpread({\n                id: doc.id\n              }, doc.data()));\n            });\n          }).catch(function (err) {\n            return console.log('Error while fetching data (getOrderingBy)', err);\n          }));\n\n        case 7:\n          return _context2.abrupt(\"return\", data);\n\n        case 8:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var getByAttribute = function getByAttribute(collection, attribute, value) {\n  var db, ref, data;\n  return _regeneratorRuntime.async(function getByAttribute$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          console.log(\"[Firebase - getByAttribute] collection: \" + collection + \"; attribute: \" + attribute + \"; value: \" + value);\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          data = [];\n          _context3.next = 6;\n          return _regeneratorRuntime.awrap(ref.where(attribute, '==', value).get().then(function (snapshot) {\n            snapshot.forEach(function (doc) {\n              data.push(_objectSpread({\n                id: doc.id\n              }, doc.data()));\n            });\n          }).catch(function (err) {\n            return console.log('Error while getting data by attribute', err);\n          }));\n\n        case 6:\n          return _context3.abrupt(\"return\", data);\n\n        case 7:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var getByAttributeOrderingBy = function getByAttributeOrderingBy(collection, attribute, value, orderBy) {\n  var db, ref, data;\n  return _regeneratorRuntime.async(function getByAttributeOrderingBy$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          console.log(\"[Firebase - getByAttribute] collection: \" + collection + \"; attribute: \" + attribute + \"; value: \" + value + \"; orderBy: \" + orderBy);\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          data = [];\n          _context4.next = 6;\n          return _regeneratorRuntime.awrap(ref.where(attribute, '==', value).get().then(function (snapshot) {\n            snapshot.forEach(function (doc) {\n              data.push(_objectSpread({\n                id: doc.id\n              }, doc.data()));\n            });\n          }).catch(function (err) {\n            return console.log('Error while getting data by attribute', err);\n          }));\n\n        case 6:\n          return _context4.abrupt(\"return\", data);\n\n        case 7:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var getById = function getById(collection, id) {\n  var db, ref, data;\n  return _regeneratorRuntime.async(function getById$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          console.log(\"[Firebase - getById] collection: \" + collection + \"; id: \" + id);\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          data = null;\n          _context5.next = 6;\n          return _regeneratorRuntime.awrap(ref.doc(id).get().then(function (doc) {\n            data = _objectSpread({\n              id: doc.id\n            }, doc.data());\n          }).catch(function (err) {\n            return console.log('Error while getting by id.', err);\n          }));\n\n        case 6:\n          return _context5.abrupt(\"return\", data);\n\n        case 7:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var getFirst = function getFirst(collection) {\n  var data, db, ref;\n  return _regeneratorRuntime.async(function getFirst$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          console.log(\"[Firebase - findFirstData] collection: \" + collection);\n          data = [];\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          _context6.next = 6;\n          return _regeneratorRuntime.awrap(ref.limit(1).get().then(function (snapshot) {\n            snapshot.forEach(function (doc) {\n              data.push(_objectSpread({\n                id: doc.id\n              }, doc.data()));\n            });\n          }).catch(function (err) {\n            return console.log('Error while getting data by attribute', err);\n          }));\n\n        case 6:\n          return _context6.abrupt(\"return\", data.length > 0 ? data[0] : null);\n\n        case 7:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var getFirstByAttribute = function getFirstByAttribute(collection, attribute, value) {\n  var docs;\n  return _regeneratorRuntime.async(function getFirstByAttribute$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          console.log('[Firebase - getFirstByAttribute] ...');\n          _context7.next = 3;\n          return _regeneratorRuntime.awrap(getByAttribute(collection, attribute, value));\n\n        case 3:\n          docs = _context7.sent;\n          return _context7.abrupt(\"return\", docs.length ? docs.shift() : null);\n\n        case 5:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var getGroupDeliveries = function getGroupDeliveries(collection, doc, subcollection) {\n  var data, db, ref;\n  return _regeneratorRuntime.async(function getGroupDeliveries$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          console.log(\"[Firebase - getGroupDeliveries] collection: \" + collection + \"; doc: \" + doc + \"; subcollection: \" + subcollection);\n          data = [];\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          _context8.next = 6;\n          return _regeneratorRuntime.awrap(ref.doc(doc).collection(subcollection).orderBy('date', 'desc').get().then(function (snapshot) {\n            snapshot.forEach(function (document) {\n              data.push(_objectSpread({\n                id: document.id,\n                deliveryDate: document.data().date.toDate(),\n                limitDate: document.data().ordersLimitDate.toDate()\n              }, document.data()));\n            });\n          }).catch(function (err) {\n            return console.log('Error while getting data from deliveries', err);\n          }));\n\n        case 6:\n          return _context8.abrupt(\"return\", data);\n\n        case 7:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var getByIdFromSubcollection = function getByIdFromSubcollection(collection, collectionId, subcollection, subcollectionId) {\n  var data, db, ref;\n  return _regeneratorRuntime.async(function getByIdFromSubcollection$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          console.log(\"[Firebase - getByIdFromSubcollection] collection: \" + collection + \"; doc: \" + collectionId + \"; subcollection: \" + subcollection + \"; subDoc: \" + subcollectionId);\n          data = null;\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          _context9.next = 6;\n          return _regeneratorRuntime.awrap(ref.doc(collectionId).collection(subcollection).doc(subcollectionId).get().then(function (doc) {\n            data = _objectSpread({\n              id: doc.id,\n              deliveryDate: doc.data().date.toDate(),\n              limitDate: doc.data().ordersLimitDate.toDate()\n            }, doc.data());\n          }).catch(function (err) {\n            return console.log('Error while getting by id from subcollection', err);\n          }));\n\n        case 6:\n          return _context9.abrupt(\"return\", data);\n\n        case 7:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var insertDoc = function insertDoc(collection, data) {\n  var db;\n  return _regeneratorRuntime.async(function insertDoc$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          console.log(\"[Firebase - insertDoc] collection: \" + collection + \"; data: \" + JSON.stringify(data));\n          db = firebase.firestore();\n          _context10.next = 4;\n          return _regeneratorRuntime.awrap(db.collection(collection).doc().set(data).catch(function (err) {\n            console.log('Error while adding data.', err);\n\n            if (err.code === 'permission-denied') {\n              navigate('Signin');\n            }\n          }));\n\n        case 4:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var insertDocAndRetrieveId = function insertDocAndRetrieveId(collection, data) {\n  var id, db;\n  return _regeneratorRuntime.async(function insertDocAndRetrieveId$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          console.log(\"[Firebase - insertDocAndRetrieveId] collection: \" + collection + \"; data: \" + JSON.stringify(data));\n          id = null;\n          db = firebase.firestore();\n          _context11.next = 5;\n          return _regeneratorRuntime.awrap(db.collection(collection).add(data).then(function (docRef) {\n            id = docRef.id;\n          }).catch(function (err) {\n            console.log('Error while adding data.', err);\n\n            if (err.code === 'permission-denied') {\n              navigate('Signin');\n            }\n          }));\n\n        case 5:\n          return _context11.abrupt(\"return\", id);\n\n        case 6:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var insertIntoSubcollection = function insertIntoSubcollection(collection, doc, subcollection, data) {\n  var db, ref;\n  return _regeneratorRuntime.async(function insertIntoSubcollection$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          console.log(\"[Firebase - insertIntoSubcollection] collection: \" + collection + \"; doc: \" + doc + \"; subcollection: \" + subcollection);\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          _context12.next = 5;\n          return _regeneratorRuntime.awrap(ref.doc(doc).collection(subcollection).add(data).catch(function (err) {\n            return console.log('Error while inserting doc into subcollection', err);\n          }));\n\n        case 5:\n          return _context12.abrupt(\"return\", data);\n\n        case 6:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var updateDocInSubcollection = function updateDocInSubcollection(collection, doc, subcollection, subcollectionDoc, data) {\n  var db, ref;\n  return _regeneratorRuntime.async(function updateDocInSubcollection$(_context13) {\n    while (1) {\n      switch (_context13.prev = _context13.next) {\n        case 0:\n          console.log(\"[Firebase - updateDocInSubcollection] collection: \" + collection + \"; doc: \" + doc + \"; subcollection: \" + subcollection + \"; subcollection doc: \" + subcollectionDoc);\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          _context13.next = 5;\n          return _regeneratorRuntime.awrap(ref.doc(doc).collection(subcollection).doc(subcollectionDoc).set(data).catch(function (err) {\n            return console.log('Error while updating doc in subcollection', err);\n          }));\n\n        case 5:\n          return _context13.abrupt(\"return\", data);\n\n        case 6:\n        case \"end\":\n          return _context13.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var updateDocAttribute = function updateDocAttribute(collection, doc, attribute, value) {\n  var db;\n  return _regeneratorRuntime.async(function updateDocAttribute$(_context14) {\n    while (1) {\n      switch (_context14.prev = _context14.next) {\n        case 0:\n          console.log(\"[Firebase - updateDocAttribute] collection: \" + collection + \"; doc: \" + doc + \"; attribute: \" + attribute + \"; value: \" + value);\n          db = firebase.firestore();\n          _context14.next = 4;\n          return _regeneratorRuntime.awrap(db.collection(collection).doc(doc).update(attribute, value).catch(function (err) {\n            console.log(\"Error updating document: \" + doc, err);\n\n            if (err.code === 'permission-denied') {\n              navigate('Signin');\n            }\n          }));\n\n        case 4:\n        case \"end\":\n          return _context14.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var updateDoc = function updateDoc(collection, doc, data) {\n  var db;\n  return _regeneratorRuntime.async(function updateDoc$(_context15) {\n    while (1) {\n      switch (_context15.prev = _context15.next) {\n        case 0:\n          console.log(\"[Firebase - updateDoc] collection: \" + collection + \"; doc: \" + doc + \"; data: \" + JSON.stringify(data));\n          db = firebase.firestore();\n          _context15.next = 4;\n          return _regeneratorRuntime.awrap(db.collection(collection).doc(doc).update(data).catch(function (err) {\n            console.log(\"Error updating document: \" + doc, err);\n\n            if (err.code === 'permission-denied') {\n              navigate('Signin');\n            }\n          }));\n\n        case 4:\n        case \"end\":\n          return _context15.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var deleteDoc = function deleteDoc(collection, doc) {\n  var db;\n  return _regeneratorRuntime.async(function deleteDoc$(_context16) {\n    while (1) {\n      switch (_context16.prev = _context16.next) {\n        case 0:\n          console.log(\"[Firebase - deleteDoc] collection: \" + collection + \"; doc: \" + doc);\n          db = firebase.firestore();\n          _context16.next = 4;\n          return _regeneratorRuntime.awrap(db.collection(collection).doc(doc).delete().catch(function (err) {\n            console.log(\"Error deleting document: \" + doc, err);\n            navigate('Signin');\n          }));\n\n        case 4:\n        case \"end\":\n          return _context16.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var deleteDocInSubcollection = function deleteDocInSubcollection(collection, doc, subcollection, subcollectionDoc) {\n  var db, ref;\n  return _regeneratorRuntime.async(function deleteDocInSubcollection$(_context17) {\n    while (1) {\n      switch (_context17.prev = _context17.next) {\n        case 0:\n          console.log(\"[Firebase - deleteDocInSubcollection] collection: \" + collection + \"; doc: \" + doc + \"; subcollection: \" + subcollection + \"; doc: \" + subcollectionDoc);\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          _context17.next = 5;\n          return _regeneratorRuntime.awrap(ref.doc(doc).collection(subcollection).doc(subcollectionDoc).delete().catch(function (err) {\n            console.log(\"Error deleting document in subcollection: \" + doc, err);\n            navigate('Signin');\n          }));\n\n        case 5:\n        case \"end\":\n          return _context17.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var resetPassword = function resetPassword(email) {\n  return firebase.auth().sendPasswordResetEmail(email);\n};\nexport var fetchPayments = function fetchPayments(collection, subcollection, doc) {\n  var db, ref, userPayments;\n  return _regeneratorRuntime.async(function fetchPayments$(_context18) {\n    while (1) {\n      switch (_context18.prev = _context18.next) {\n        case 0:\n          db = firebase.firestore();\n          ref = db.collection(collection);\n          userPayments = [];\n          _context18.next = 5;\n          return _regeneratorRuntime.awrap(ref.doc(doc).collection(subcollection).orderBy('date').get().then(function (snapshot) {\n            snapshot.forEach(function (payment) {\n              var date = new Date(payment.data().date);\n              userPayments.push({\n                paymentId: payment.id,\n                userId: payment.data().userId,\n                currentBalance: payment.data().currentBalance,\n                date: date,\n                orderId: payment.data().orderId,\n                orderTotalAmount: payment.data().orderTotalAmount,\n                status: payment.data().status,\n                totalToBePaid: payment.data().totalToBePaid,\n                receipt: payment.data().receipt ? payment.data().receipt : {},\n                showReceiptImage: false,\n                paymentNote: payment.data().paymentNote\n              });\n            });\n            userPayments.sort(function (a, b) {\n              return a.date < b.date ? 1 : -1;\n            });\n          }).catch(function (err) {\n            console.log('Erro ao carregar os pagamentos!', err);\n            return err;\n          }));\n\n        case 5:\n          return _context18.abrupt(\"return\", userPayments);\n\n        case 6:\n        case \"end\":\n          return _context18.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};","map":{"version":3,"sources":["/home/bordi/projects/cestas-cooperflora-rn/src/api/firebase.js"],"names":["firebase","navigate","get","collection","console","log","db","firestore","ref","data","then","snapshot","forEach","doc","push","id","catch","err","getOrderingBy","field","direction","orderBy","getByAttribute","attribute","value","where","getByAttributeOrderingBy","getById","getFirst","limit","length","getFirstByAttribute","docs","shift","getGroupDeliveries","subcollection","document","deliveryDate","date","toDate","limitDate","ordersLimitDate","getByIdFromSubcollection","collectionId","subcollectionId","insertDoc","JSON","stringify","set","code","insertDocAndRetrieveId","add","docRef","insertIntoSubcollection","updateDocInSubcollection","subcollectionDoc","updateDocAttribute","update","updateDoc","deleteDoc","delete","deleteDocInSubcollection","resetPassword","email","auth","sendPasswordResetEmail","fetchPayments","userPayments","payment","Date","paymentId","userId","currentBalance","orderId","orderTotalAmount","status","totalToBePaid","receipt","showReceiptImage","paymentNote","sort","a","b"],"mappings":"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","sourcesContent":["import firebase from 'firebase';\nimport 'firebase/firestore';\nimport { navigate } from '../navigationRef';\n\nexport const get = async (collection) => {\n  console.log(`[Firebase - get] collection: ${collection}`);\n\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n  const data = [];\n\n  await ref\n    .get()\n    .then((snapshot) => {\n      snapshot.forEach((doc) => {\n        data.push({ id: doc.id, ...doc.data() });\n      });\n    })\n    .catch((err) => console.log('Error while fetching data (get)', err));\n\n  return data;\n};\n\nexport const getOrderingBy = async (collection, field, direction = 'asc') => {\n  console.log(`[Firebase - getOrderingBy] collection: ${collection}`);\n\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n  const data = [];\n\n  await ref\n    .orderBy(field, direction)\n    .get()\n    .then((snapshot) => {\n      snapshot.forEach((doc) => {\n        data.push({ id: doc.id, ...doc.data() });\n      });\n    })\n    .catch((err) =>\n      console.log('Error while fetching data (getOrderingBy)', err)\n    );\n\n  return data;\n};\n\nexport const getByAttribute = async (collection, attribute, value) => {\n  console.log(\n    `[Firebase - getByAttribute] collection: ${collection}; attribute: ${attribute}; value: ${value}`\n  );\n\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n  const data = [];\n\n  await ref\n    .where(attribute, '==', value)\n    .get()\n    .then((snapshot) => {\n      snapshot.forEach((doc) => {\n        data.push({ id: doc.id, ...doc.data() });\n      });\n    })\n    .catch((err) => console.log('Error while getting data by attribute', err));\n\n  return data;\n};\n\nexport const getByAttributeOrderingBy = async (\n  collection,\n  attribute,\n  value,\n  orderBy\n) => {\n  console.log(\n    `[Firebase - getByAttribute] collection: ${collection}; attribute: ${attribute}; value: ${value}; orderBy: ${orderBy}`\n  );\n\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n  const data = [];\n\n  await ref\n    .where(attribute, '==', value)\n    .get()\n    .then((snapshot) => {\n      snapshot.forEach((doc) => {\n        data.push({ id: doc.id, ...doc.data() });\n      });\n    })\n    .catch((err) => console.log('Error while getting data by attribute', err));\n\n  return data;\n};\n\nexport const getById = async (collection, id) => {\n  console.log(`[Firebase - getById] collection: ${collection}; id: ${id}`);\n\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n  let data = null;\n\n  await ref\n    .doc(id)\n    .get()\n    .then((doc) => {\n      data = { id: doc.id, ...doc.data() };\n    })\n    .catch((err) => console.log('Error while getting by id.', err));\n\n  return data;\n};\n\nexport const getFirst = async (collection) => {\n  console.log(`[Firebase - findFirstData] collection: ${collection}`);\n  const data = [];\n\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n  await ref\n    .limit(1)\n    .get()\n    .then((snapshot) => {\n      snapshot.forEach((doc) => {\n        data.push({ id: doc.id, ...doc.data() });\n      });\n    })\n    .catch((err) => console.log('Error while getting data by attribute', err));\n\n  return data.length > 0 ? data[0] : null;\n};\n\nexport const getFirstByAttribute = async (collection, attribute, value) => {\n  console.log('[Firebase - getFirstByAttribute] ...');\n\n  const docs = await getByAttribute(collection, attribute, value);\n\n  return docs.length ? docs.shift() : null;\n};\n\nexport const getGroupDeliveries = async (collection, doc, subcollection) => {\n  console.log(\n    `[Firebase - getGroupDeliveries] collection: ${collection}; doc: ${doc}; subcollection: ${subcollection}`\n  );\n  const data = [];\n\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n  await ref\n    .doc(doc)\n    .collection(subcollection)\n    .orderBy('date', 'desc')\n    .get()\n    .then((snapshot) => {\n      snapshot.forEach((document) => {\n        data.push({\n          id: document.id,\n          deliveryDate: document.data().date.toDate(),\n          limitDate: document.data().ordersLimitDate.toDate(),\n          ...document.data(),\n        });\n      });\n    })\n    .catch((err) =>\n      console.log('Error while getting data from deliveries', err)\n    );\n\n  return data;\n};\n\nexport const getByIdFromSubcollection = async (\n  collection,\n  collectionId,\n  subcollection,\n  subcollectionId\n) => {\n  console.log(\n    `[Firebase - getByIdFromSubcollection] collection: ${collection}; doc: ${collectionId}; subcollection: ${subcollection}; subDoc: ${subcollectionId}`\n  );\n\n  let data = null;\n\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n  await ref\n    .doc(collectionId)\n    .collection(subcollection)\n    .doc(subcollectionId)\n    .get()\n    .then((doc) => {\n      data = {\n        id: doc.id,\n        deliveryDate: doc.data().date.toDate(),\n        limitDate: doc.data().ordersLimitDate.toDate(),\n        ...doc.data(),\n      };\n    })\n    .catch((err) =>\n      console.log('Error while getting by id from subcollection', err)\n    );\n\n  return data;\n};\n\nexport const insertDoc = async (collection, data) => {\n  console.log(\n    `[Firebase - insertDoc] collection: ${collection}; data: ${JSON.stringify(\n      data\n    )}`\n  );\n\n  const db = firebase.firestore();\n\n  await db\n    .collection(collection)\n    .doc()\n    .set(data)\n    .catch((err) => {\n      console.log('Error while adding data.', err);\n      if (err.code === 'permission-denied') {\n        navigate('Signin');\n      }\n    });\n};\n\nexport const insertDocAndRetrieveId = async (collection, data) => {\n  console.log(\n    `[Firebase - insertDocAndRetrieveId] collection: ${collection}; data: ${JSON.stringify(\n      data\n    )}`\n  );\n\n  let id = null;\n  const db = firebase.firestore();\n\n  await db\n    .collection(collection)\n    .add(data)\n    .then((docRef) => {\n      id = docRef.id;\n    })\n    .catch((err) => {\n      console.log('Error while adding data.', err);\n      if (err.code === 'permission-denied') {\n        navigate('Signin');\n      }\n    });\n\n  return id;\n};\n\nexport const insertIntoSubcollection = async (\n  collection,\n  doc,\n  subcollection,\n  data\n) => {\n  console.log(\n    `[Firebase - insertIntoSubcollection] collection: ${collection}; doc: ${doc}; subcollection: ${subcollection}`\n  );\n\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n  await ref\n    .doc(doc)\n    .collection(subcollection)\n    .add(data)\n    .catch((err) =>\n      console.log('Error while inserting doc into subcollection', err)\n    );\n\n  return data;\n};\n\nexport const updateDocInSubcollection = async (\n  collection,\n  doc,\n  subcollection,\n  subcollectionDoc,\n  data\n) => {\n  console.log(\n    `[Firebase - updateDocInSubcollection] collection: ${collection}; doc: ${doc}; subcollection: ${subcollection}; subcollection doc: ${subcollectionDoc}`\n  );\n\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n  await ref\n    .doc(doc)\n    .collection(subcollection)\n    .doc(subcollectionDoc)\n    .set(data)\n    .catch((err) =>\n      console.log('Error while updating doc in subcollection', err)\n    );\n\n  return data;\n};\n\nexport const updateDocAttribute = async (collection, doc, attribute, value) => {\n  console.log(\n    `[Firebase - updateDocAttribute] collection: ${collection}; doc: ${doc}; attribute: ${attribute}; value: ${value}`\n  );\n\n  const db = firebase.firestore();\n\n  await db\n    .collection(collection)\n    .doc(doc)\n    .update(attribute, value)\n    .catch((err) => {\n      console.log(`Error updating document: ${doc}`, err);\n      if (err.code === 'permission-denied') {\n        navigate('Signin');\n      }\n    });\n};\n\nexport const updateDoc = async (collection, doc, data) => {\n  console.log(\n    `[Firebase - updateDoc] collection: ${collection}; doc: ${doc}; data: ${JSON.stringify(\n      data\n    )}`\n  );\n\n  const db = firebase.firestore();\n\n  await db\n    .collection(collection)\n    .doc(doc)\n    .update(data)\n    .catch((err) => {\n      console.log(`Error updating document: ${doc}`, err);\n      if (err.code === 'permission-denied') {\n        navigate('Signin');\n      }\n    });\n};\n\nexport const deleteDoc = async (collection, doc) => {\n  console.log(`[Firebase - deleteDoc] collection: ${collection}; doc: ${doc}`);\n\n  const db = firebase.firestore();\n\n  await db\n    .collection(collection)\n    .doc(doc)\n    .delete()\n    .catch((err) => {\n      console.log(`Error deleting document: ${doc}`, err);\n      navigate('Signin');\n    });\n};\n\nexport const deleteDocInSubcollection = async (\n  collection,\n  doc,\n  subcollection,\n  subcollectionDoc\n) => {\n  console.log(\n    `[Firebase - deleteDocInSubcollection] collection: ${collection}; doc: ${doc}; subcollection: ${subcollection}; doc: ${subcollectionDoc}`\n  );\n\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n\n  await ref\n    .doc(doc)\n    .collection(subcollection)\n    .doc(subcollectionDoc)\n    .delete()\n    .catch((err) => {\n      console.log(`Error deleting document in subcollection: ${doc}`, err);\n      navigate('Signin');\n    });\n};\n\nexport const resetPassword = (email) => {\n  return firebase.auth().sendPasswordResetEmail(email);\n};\n\nexport const fetchPayments = async (collection, subcollection, doc) => {\n  const db = firebase.firestore();\n  const ref = db.collection(collection);\n  const userPayments = [];\n  await ref\n    .doc(doc)\n    .collection(subcollection)\n    .orderBy('date')\n    .get()\n    .then((snapshot) => {\n      snapshot.forEach((payment) => {\n        const date = new Date(payment.data().date);\n        userPayments.push({\n          paymentId: payment.id,\n          userId: payment.data().userId,\n          currentBalance: payment.data().currentBalance,\n          date,\n          orderId: payment.data().orderId,\n          orderTotalAmount: payment.data().orderTotalAmount,\n          status: payment.data().status,\n          totalToBePaid: payment.data().totalToBePaid,\n          receipt: payment.data().receipt ? payment.data().receipt : {},\n          showReceiptImage: false,\n          paymentNote: payment.data().paymentNote,\n        });\n      });\n      userPayments.sort((a, b) => {\n        return a.date < b.date ? 1 : -1;\n      });\n    })\n    .catch((err) => {\n      console.log('Erro ao carregar os pagamentos!', err);\n      return err;\n      // Alert.alert('Erro ao carregar os seus pagamentos!', err);\n    });\n  return userPayments;\n};\n"]},"metadata":{},"sourceType":"module"}